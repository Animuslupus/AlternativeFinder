(this.webpackJsonpalternative=this.webpackJsonpalternative||[]).push([[0],{143:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(52),i=n.n(r),c=(n(143),n(61)),o=n(62),l=n(74),u=n(71),d=n(167),h=n(176),p=n(154),j=n(177),b=n(169),m=n(123),v=n(170),g=n(166),x=n(174),O=n(6),f=[{key:"1",text:"1",value:1},{key:"2",text:"2",value:2},{key:"3",text:"3",value:3},{key:"4",text:"4",value:4},{key:"5",text:"5",value:5},{key:"6",text:"6",value:6},{key:"7",text:"7",value:7},{key:"8",text:"8",value:8},{key:"9",text:"9",value:9},{key:"10",text:"10",value:10}],y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleFormChange=function(e,t){var n=t.name,s=t.value;a.setState(Object(m.a)({},n,s))},a.handleSubmit=function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:a.props.product.id,alternativeId:a.props.alternative.id,descriptionGerman:a.state.descriptionDE,descriptionEnglish:a.state.descriptionEN,ranking:a.state.ranking})};fetch("http://127.0.0.1:5000/alternative",e).then((function(e){200!=e.status?e.json().then((function(e){a.setState({submitted:!0,submissionError:!0,statusMessage:e.message}),setTimeout((function(){a.setState({submitted:!1})}),1e4)})):(a.setState({submitted:!0,submissionError:!1,statusMessage:"Your Product-Alternative pair was added to the database"}),setTimeout((function(){a.setState({submitted:!1})}),5e3),a.props.callback())}))},a.state={descriptionDE:"",descriptionEN:"",ranking:1,submitted:!1,submissionError:!1,statusMessage:""},a}return Object(o.a)(n,[{key:"getDisplayMessage",value:function(e,t){return e?"You selected the same Product as its alternative - please choose a different product or alternative.":t?"The selected alternative is already listed as alternative for the selected product.":this.state.statusMessage}},{key:"render",value:function(){var e=this.props.product&&this.props.alternative,t=e?this.props.product.emissions-this.props.alternative.emissions:0;t=Math.round(100*t)/100;var n=!!e&&this.props.product.id===this.props.alternative.id,a=!!e&&this.props.alternative.id in this.props.product.alternatives.map((function(e){return e.id}));return Object(O.jsxs)(v.a,{widths:"equal",onSubmit:this.handleSubmit,children:[Object(O.jsxs)(v.a.Group,{children:[Object(O.jsx)(v.a.Input,{label:"Selected Product",readOnly:!0,value:this.props.product?this.props.product.nameGerman:"No Product Selected"}),Object(O.jsx)(v.a.Input,{label:"Selected Alternative",readOnly:!0,value:this.props.alternative?this.props.alternative.nameGerman:"No Alternative Selected"})]}),Object(O.jsx)(v.a.Group,{children:Object(O.jsx)(v.a.Field,{control:g.a,label:"Description German",name:"descriptionDE",value:this.state.descriptionDE,onChange:this.handleFormChange})}),Object(O.jsx)(v.a.Group,{children:Object(O.jsx)(v.a.Field,{control:g.a,label:"Description English",name:"descriptionEN",value:this.state.descriptionEN,onChange:this.handleFormChange})}),Object(O.jsxs)(v.a.Group,{children:[Object(O.jsx)(v.a.Input,{label:"Emission Saved",readOnly:!0,placeholder:"None",error:t<0,value:t}),Object(O.jsx)(v.a.Select,{label:"Ranking",name:"ranking",value:this.state.ranking,onChange:this.handleFormChange,options:f,placeholder:"Ranking"})]}),Object(O.jsx)(x.a,{visible:n||this.state.submitted||a,success:!n&&!this.state.submissionError&&!a,error:n||this.state.submissionError||a,header:n||a?"Duplication":this.state.submissionError?"Submission Error":"Submission Successful",content:this.getDisplayMessage(n,a)}),Object(O.jsx)(v.a.Button,{content:"Submit",disabled:n||!e})]})}}]),n}(s.a.Component),k=n(175),S=n(168),C=n(171),E=n(173),F=n(126),D=n(172),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).queryData=function(){fetch("http://127.0.0.1:5000/products").then((function(e){return e.json()})).then((function(e){a.setState({isLoaded:!0,products:e,productsFiltered:a.state.searchQuery?a.state.productsFiltered:e})}),(function(e){console.log(e)}))},a.handleSearchChange=function(e,t){var n=t.value;a.setState({searchQuery:n}),setTimeout((function(){if(a.state.searchQuery.length<1)return a.setState({productsFiltered:a.state.products});var e=new RegExp(a.state.searchQuery,"i"),t=a.state.products.filter((function(t){return e.test(t.nameGerman)||e.test(t.category)}));a.setState({productsFiltered:t})}),300)},a.onCardClick=function(e){console.log(e),console.log(a.state.products.find((function(t){return t.id==e.id}))),a.props.callback(e),a.setState({selectedProduct:e.id})},a.state={isLoaded:!1,searchQuery:"",productsFiltered:[],products:[],selectedProduct:-1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){setInterval(this.queryData,2e3)}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,a=t.isLoaded,s=t.searchQuery,r=t.productsFiltered;return n?Object(O.jsx)(k.a,{children:n}):a?Object(O.jsxs)(d.a,{children:[Object(O.jsx)(h.a,{children:this.props.heading}),Object(O.jsx)(C.a,{style:{marginBottom:"1em"},showNoResults:!1,resultRenderer:function(){},onSearchChange:this.handleSearchChange,value:s}),Object(O.jsx)(j.a,{columns:3,stackable:!0,children:r.map((function(t){return Object(O.jsx)(j.a.Column,{children:Object(O.jsxs)(E.a,{onClick:function(){e.onCardClick(t)},color:e.state.selectedProduct==t.id?"green":"grey",children:[Object(O.jsx)(F.a,{src:t.imageLink,style:{maxHeight:"150px"},centered:!0}),Object(O.jsxs)(E.a.Content,{children:[Object(O.jsx)(E.a.Description,{style:{fontWeight:"bold"},children:t.nameGerman}),Object(O.jsxs)(E.a.Meta,{children:["Category: ",t.category]}),Object(O.jsxs)(E.a.Description,{children:["Emissions: ",t.emissions]})]}),Object(O.jsx)(E.a.Content,{extra:!0,children:Object(O.jsx)(D.a,{children:t.alternatives.map((function(e){return Object(O.jsx)(D.a.Item,{children:e.nameGerman},e.id)}))})})]})},t.id)}))})]}):Object(O.jsx)(d.a,{textAlign:"center",children:Object(O.jsx)(S.a,{children:"Loading"})})}}]),n}(s.a.Component),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).clearSelection=function(){},a.contextRef=s.a.createRef(),a.state={product:null,alternative:null,rank:0},a}return Object(o.a)(n,[{key:"selectProduct",value:function(e){this.setState({product:e})}},{key:"selectAlternative",value:function(e){this.setState({alternative:e})}},{key:"handleFormChange",value:function(e,t){console.log(t)}},{key:"render",value:function(){var e=this;return Object(O.jsxs)(d.a,{textAlign:"center",style:{marginTop:"1em",paddingLeft:"10em",paddingRight:"10em"},fluid:!0,children:[Object(O.jsx)(h.a,{as:"h1",children:"Find Alternative To - Alternative Form"}),Object(O.jsx)("p",{style:{marginBottom:"2em"},children:"Tipp: You can use the search-bar to search for product-categories"}),Object(O.jsx)(p.a,{innerRef:this.contextRef,children:Object(O.jsxs)(j.a,{columns:3,children:[Object(O.jsx)(j.a.Column,{style:{borderRight:"1px solid rgb(212, 212, 212)"},children:Object(O.jsx)(P,{callback:function(t){return e.selectProduct(t)},heading:"Product"})}),Object(O.jsx)(j.a.Column,{style:{borderRight:"1px solid rgb(212, 212, 212)"},children:Object(O.jsx)(P,{callback:function(t){return e.selectAlternative(t)},heading:"Alternative"})}),Object(O.jsx)(j.a.Column,{children:Object(O.jsxs)(b.a,{context:this.contextRef,children:[Object(O.jsx)(h.a,{children:"Form"}),Object(O.jsx)(y,{product:this.state.product,alternative:this.state.alternative,callback:this.clearSelection})]})})]})})]})}}]),n}(s.a.Component),G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};n(151);i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(R,{})}),document.getElementById("root")),G()}},[[152,1,2]]]);
//# sourceMappingURL=main.06ba7475.chunk.js.map