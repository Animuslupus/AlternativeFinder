(this.webpackJsonpfat=this.webpackJsonpfat||[]).push([[0],{128:function(e,t,a){},141:function(e){e.exports=JSON.parse('{"Welcome":"Welcome to Climateers","alternative":"alternative to","better":"more sustainable","replaces":"replaced by"}')},142:function(e){e.exports=JSON.parse('{"Welcome":"Willkommen bei Climateers","alternative":"Alternative zu","better":"Umweltfreundlicher","replaces":"ersetzt durch"}')},248:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(55),c=a.n(s),i=(a(128),a(126)),o=a(117),l={en:{translation:a(141)},de:{translation:a(142)}};i.a.use(o.d).init({resources:l,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var u=i.a,d=a(151),p=a(32),h=a(33),j=a(39),m=a(37),b=a(262),g=a(260),v=a(271),O=a(267),f=(a(166),a(269)),x=a(265),S=a(152),y=a(77),k=a(73),C=a.n(k),w=a(86),A=a(123),L=a(83),I="http://127.0.0.1:4000",M="alternatives.climateers.app",P=!1;L.a.initializeApp({apiKey:"AIzaSyBbBgftjIRw97QbxUSDXDUkeVTJtrP4uQA",authDomain:"climateers-429ca.firebaseapp.com",projectId:"climateers-429ca",storageBucket:"climateers-429ca.appspot.com",messagingSenderId:"969502030102",appId:"1:969502030102:web:7c30c30c43ea7a3cc8f837",measurementId:"G-KMHHWHR8N8"}),L.a.analytics();var R=L.a.firestore(),z=a(145),T=a.n(z),B=a(146),F=a.n(B).a.load("userId");function N(){return(N=Object(A.a)(C.a.mark((function e(t){var a,n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P?I:M,e.next=3,fetch(a+"/altproducts");case 3:return n=e.sent,e.next=6,n.json();case 6:return n=e.sent,r="en"===t?"English":"German",s=n.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{name:e["name"+r],category:e["category"+r],alternatives:e.alternatives.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{name:e["name"+r],category:e["category"+r],description:e["description"+r]})}))})})),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return W.apply(this,arguments)}function W(){return(W=Object(A.a)(C.a.mark((function e(t){var a,n,r,s=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,T.a.v4({fallbackUrls:["https://ifconfig.co/ip"]});case 3:n=e.sent,r={type:t,userId:F||"",ipAddress:n,createdAt:L.a.firestore.Timestamp.now(),params:a},P?console.log(r):R.collection("FATEvents").add(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return e?e.replace(/^\w/,(function(e){return e.toUpperCase()})):e}var H=a(6),J=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=Math.round((this.props.product.emissions-this.props.alternative.emissions)/this.props.product.emissions*100);return Object(H.jsxs)(x.a,{onClick:function(){e.props.onClick(e.props.product,e.props.alternative)},children:[Object(H.jsx)(x.a,{style:{marginBottom:"0"},children:Object(H.jsx)(x.a.Content,{children:Object(H.jsxs)(f.a,{columns:3,verticalAlign:"middle",children:[Object(H.jsx)(f.a.Column,{children:Object(H.jsx)(S.a,{style:{maxHeight:50,width:"auto"},size:"small",src:this.props.product.imageLink})}),Object(H.jsx)(f.a.Column,{textAlign:"center",children:Object(H.jsx)(y.a,{name:"angle double right",size:"big",color:"black"})}),Object(H.jsx)(f.a.Column,{children:Object(H.jsx)(S.a,{style:{height:60,width:"auto"},size:"small",src:this.props.alternative.imageLink})})]})})}),Object(H.jsxs)(x.a.Content,{style:{borderTop:0},children:[Object(H.jsx)(x.a.Header,{children:D(this.props.alternative.name)}),Object(H.jsxs)(x.a.Meta,{children:[Object(H.jsx)(O.a,{children:"alternative"})," ",D(this.props.product.name)]})]}),Object(H.jsxs)(x.a.Content,{extra:!0,textAlign:"center",children:[t,"% ",Object(H.jsx)(O.a,{children:"better"})]})]})}}]),a}(r.a.Component),E=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderAlternative",value:function(e,t){return Object(H.jsx)(f.a.Column,{children:Object(H.jsx)(J,{onClick:this.props.callback,product:e,alternative:t})},t.id.toString()+e.id.toString())}},{key:"getAlternatives",value:function(e){var t=this;return this.props.shallow?this.renderAlternative(e,e.alternatives[0]):e.alternatives.map((function(a){return t.renderAlternative(e,a)}))}},{key:"render",value:function(){var e=this;return this.props.products&&this.props.products.length>0&&this.props.products[0]?Object(H.jsx)(f.a,{doubling:!0,stretched:!0,centered:!0,columns:4,children:this.props.products.map((function(t){return e.getAlternatives(t)}))}):Object(H.jsx)(H.Fragment,{})}}]),a}(r.a.Component);E.defaultProps={shallow:!1};var Q=E,V=a(110),G=a(263),K=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleSearchChange=function(e,t){var a=t.value;a.length!=n.tmpMaxSearchLength-1||n.searchSuccessful?a.length>n.tmpMaxSearchLength?n.tmpMaxSearchLength=a.length:0==a.length&&(n.tmpMaxSearchLength=0,n.searchSuccessful=!1):U("FailedSearch",{searchQuery:a}),n.setState({value:a,loading:!0}),setTimeout((function(){var e=new RegExp(n.state.value,"i"),t=n.state.products.filter((function(t){return e.test(t.name)||e.test(t.category)}));n.setState({results:t,loading:!1})}),300)},n.resultRenderer=function(e){return Object(H.jsx)("div",{children:Object(H.jsxs)(V.a,{children:[e.name,Object(H.jsx)("img",{src:e.imageLink})]})})},n.state={results:[],value:"",loading:!1,products:e.products},n.tmpMaxSearchLength=0,n.searchSuccessful=!1,n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({products:e.products,loading:!1})}},{key:"render",value:function(){var e=this;return Object(H.jsx)(g.a,{style:{margin:"2em",padding:"2em"},children:Object(H.jsx)(G.a,{loading:this.state.loading,onResultSelect:function(t,a){e.searchSuccessful=!0,e.setState({value:a.result.name}),e.props.onProductSelection(a.result)},resultRenderer:this.resultRenderer,onSearchChange:this.handleSearchChange,results:this.state.results,value:this.state.value})})}}]),a}(r.a.Component),X=a(95),q=a(264),Y=a(270),Z=a(261),$=a(150),_=a.n($),ee=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={isOpen:!1,alternative:{imageLink:void 0},product:{imageLink:void 0}},n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({isOpen:e.isOpen,alternative:e.alternative,product:e.product})}},{key:"render",value:function(){if(this.props.alternative&&this.props.product){var e=Math.round((this.props.product.emissions-this.props.alternative.emissions)/this.props.product.emissions*100);return Object(H.jsx)(q.a,{centered:!1,open:this.state.isOpen,onClose:this.props.onClose,children:Object(H.jsxs)(g.a,{children:[Object(H.jsxs)(Y.a,{style:{margin:0},children:[Object(H.jsxs)(f.a,{columns:2,verticalAlign:"middle",children:[Object(H.jsx)(f.a.Column,{children:Object(H.jsx)(S.a,{style:{margin:"auto",maxHeight:200,width:"auto"},size:"small",src:this.state.product.imageLink})}),Object(H.jsx)(f.a.Column,{children:Object(H.jsx)(S.a,Object(X.a)({style:{margin:"auto",maxHeight:200,width:"auto"},size:"small",src:this.state.product.imageLink},"src",this.state.alternative.imageLink))})]}),Object(H.jsxs)(f.a,{columns:2,verticalAlign:"middle",children:[Object(H.jsx)(f.a.Column,{textAlign:"center",children:Object(H.jsxs)("b",{children:[this.state.product.emissions," ",this.state.product.unit]})}),Object(H.jsx)(f.a.Column,{textAlign:"center",children:Object(H.jsxs)("b",{children:[this.state.alternative.emissions," ",this.state.alternative.unit]})})]}),Object(H.jsx)(Z.a,{vertical:!0,children:Object(H.jsx)(y.a,{name:"angle double right",style:{fontSize:"2em"},color:"black"})})]}),Object(H.jsx)(g.a,{style:{paddingBottom:"1em",paddingTop:"1em",backgroundColor:"#1a531b"},textAlign:"center",children:Object(H.jsxs)(v.a,{style:{color:"#fff"},as:"h3",children:[e,"% ",Object(H.jsx)(O.a,{children:"better"})]})}),Object(H.jsxs)(g.a,{style:{paddingLeft:"20%",paddingRight:"20%",paddingBottom:"2em",paddingTop:"1em"},children:[Object(H.jsxs)(v.a,{style:{color:"#1a531b"},as:"h2",children:[D(this.state.product.name)," ",Object(H.jsx)(O.a,{children:"replaces"})," ",D(this.state.alternative.name)]}),Object(H.jsx)("p",{children:Object(H.jsx)(_.a,{markdown:this.state.alternative.description})})]})]})})}return Object(H.jsx)(H.Fragment,{})}}]),a}(r.a.Component),te=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onCardClick=function(e,t){U("ViewDetails",{productName:e.name,productId:e.id,alternativeName:t.name,alternativeId:t.id,wasRecommended:!n.state.productSelected}),n.setState({modalIsOpen:!0,productSelected:e,alternativeSelected:t})},n.onModalClose=function(){U("CloseDetails",{productName:n.state.productSelected.name,productId:n.state.productSelected.id,alternativeName:n.state.alternativeSelected.name,alternativeId:n.state.alternativeSelected.id}),n.setState({modalIsOpen:!1})},n.selectProduct=function(e){U("searchedProductSelected",{productName:e.name,productId:e.id}),n.setState({productSelected:e})},n.state={products:[],loading:!0,productSelected:null,alternativeSelected:null,language:"en",modalIsOpen:!1},window.addEventListener("beforeunload",(function(e){U("UserLeave")})),n}return Object(h.a)(a,[{key:"loadProducts",value:function(e){var t=this;(function(e){return N.apply(this,arguments)})(e).then((function(e){t.setState({products:e,loading:!1})}))}},{key:"changeLanguage",value:function(e){"en"!==e&&"de"!==e&&(console.log("Unknown language parameter: "+e),e="en"),u.changeLanguage(e).then(this.loadProducts(e)),U("UserJoin",{language:e}),this.setState({language:e})}},{key:"componentDidMount",value:function(){this.changeLanguage(window.location.pathname.substring(1))}},{key:"randomProducts",value:function(){if(this.state.products){var e=Object(d.a)(Array(this.state.products.length).keys());e=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(e);for(var t=[],a=0;a<8;a++)t.push(this.state.products[e[a]]);return t}return null}},{key:"render",value:function(){return this.state.loading?Object(H.jsx)(b.a,{}):Object(H.jsxs)(g.a,{textAlign:"center",children:[Object(H.jsxs)(g.a,{fluid:!0,style:{backgroundColor:"#1a531b",paddingTop:"1em",height:200,marginBottom:"1em"},children:[Object(H.jsx)(v.a,{inverted:!0,children:Object(H.jsx)(O.a,{children:"Welcome"})}),Object(H.jsx)(K,{products:this.state.products,onProductSelection:this.selectProduct})]}),Object(H.jsx)(Q,{shallow:!this.state.productSelected,products:this.state.productSelected?[this.state.productSelected]:this.randomProducts(),callback:this.onCardClick}),Object(H.jsx)(ee,{onClose:this.onModalClose,isOpen:this.state.modalIsOpen,alternative:this.state.alternativeSelected,product:this.state.productSelected})]})}}]),a}(r.a.Component),ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,273)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(te,{})}),document.getElementById("root")),ae()}},[[248,1,2]]]);
//# sourceMappingURL=main.ae1ea982.chunk.js.map