(this.webpackJsonpfat=this.webpackJsonpfat||[]).push([[0],{189:function(e,t,a){},247:function(e){e.exports=JSON.parse('{"Welcome":"Find sustainable alternatives to your favorite food with climateers","alternative":"alternative to","better":"more sustainable","replaces":"replaced by","LanguageChange":"Zur deutschen Website","Send Feedback":"Send Feedback","searchPlaceHolder":"product to substitute","Feedback":"Give us feedback"}')},248:function(e){e.exports=JSON.parse('{"Welcome":"Finde nachhaltige Alternativen zu deiner <br/>Ern\xe4hrung mit climateers","alternative":"Alternative zu","better":"Umweltfreundlicher","replaces":"ersetzt durch","LanguageChange":"Switch to English","Send Feedback":"Feedback senden","searchPlaceHolder":"zu ersetzendes Produkt","Feedback":"Nehmen Sie kontakt auf"}')},518:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(71),i=a.n(s),c=(a(189),a(186)),o=a(159),l={en:{translation:a(247)},de:{translation:a(248)}};c.a.use(o.d).init({resources:l,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var d=c.a,u=a(260),p=a(41),h=a(42),j=a(47),m=a(45),g=a(536),b=a(534),v=a(261),O=a(537),f=a(541),x=a(542),S=(a(276),a(543)),k=a(540),y=a(93),C=a(90),w=a.n(C),L=a(108),A=a(183),I=a(105),F="https://alternatives.climateers.app",P="https://alternatives.climateers.app",D=!1;I.a.initializeApp({apiKey:"AIzaSyBbBgftjIRw97QbxUSDXDUkeVTJtrP4uQA",authDomain:"climateers-429ca.firebaseapp.com",projectId:"climateers-429ca",storageBucket:"climateers-429ca.appspot.com",messagingSenderId:"969502030102",appId:"1:969502030102:web:7c30c30c43ea7a3cc8f837",measurementId:"G-KMHHWHR8N8"}),I.a.analytics();var H=I.a.firestore(),M=a(251),T=a.n(M),z=a(252),B=a.n(z),E=a(253),R=B.a.load("userId"),N=Object(E.deviceDetect)();function U(){return(U=Object(A.a)(w.a.mark((function e(t){var a,n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D?F:P,e.next=3,fetch(a+"/altproducts");case 3:return n=e.sent,e.next=6,n.json();case 6:return n=e.sent,r="en"===t?"English":"German",s=n.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{name:e["name"+r],category:e["category"+r],alternatives:e.alternatives.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{name:e["name"+r],category:e["category"+r],description:e["description"+r]})}))})})),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return J.apply(this,arguments)}function J(){return(J=Object(A.a)(w.a.mark((function e(t){var a,n,r,s=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,T.a.v4({fallbackUrls:["https://ifconfig.co/ip"]});case 3:n=e.sent,r={type:t,userId:R||"",ipAddress:n,deviceInfo:N,createdAt:I.a.firestore.Timestamp.now(),params:a},D?console.log(r):H.collection("FATEvents").add(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return e?e.replace(/^\w/,(function(e){return e.toUpperCase()})):e}var Q=a(6),V=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=Math.round((this.props.product.emissions-this.props.alternative.emissions)/this.props.product.emissions*100);return Object(Q.jsxs)(k.a,{centered:!0,onClick:function(){e.props.onClick(e.props.product,e.props.alternative)},children:[Object(Q.jsx)(k.a,{style:{marginBottom:"0"},children:Object(Q.jsx)(k.a.Content,{children:Object(Q.jsxs)(S.a,{columns:3,verticalAlign:"middle",children:[Object(Q.jsx)(S.a.Column,{children:Object(Q.jsx)(v.a,{style:{maxHeight:50,width:"auto"},size:"small",src:this.props.product.imageLink})}),Object(Q.jsx)(S.a.Column,{textAlign:"center",children:Object(Q.jsx)(y.a,{name:"angle double right",size:"big",color:"black"})}),Object(Q.jsx)(S.a.Column,{children:Object(Q.jsx)(v.a,{style:{maxHeight:60,width:"auto"},size:"small",src:this.props.alternative.imageLink})})]})})}),Object(Q.jsxs)(k.a.Content,{style:{borderTop:0},children:[Object(Q.jsx)(k.a.Header,{children:G(this.props.alternative.name)}),Object(Q.jsxs)(k.a.Meta,{children:[Object(Q.jsx)(x.a,{children:"alternative"})," ",G(this.props.product.name)]})]}),Object(Q.jsxs)(k.a.Content,{extra:!0,textAlign:"center",children:[t,"% ",Object(Q.jsx)(x.a,{children:"better"})]})]})}}]),a}(r.a.Component),K=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderAlternative",value:function(e,t){return Object(Q.jsx)(S.a.Column,{children:Object(Q.jsx)(V,{onClick:this.props.callback,product:e,alternative:t})},t.id.toString()+e.id.toString())}},{key:"getAlternatives",value:function(e){var t=this;return this.props.shallow?this.renderAlternative(e,e.alternatives[0]):e.alternatives.map((function(a){return t.renderAlternative(e,a)}))}},{key:"render",value:function(){var e=this;return this.props.products&&this.props.products.length>0&&this.props.products[0]?Object(Q.jsx)(S.a,{stackable:!0,doubling:!0,columns:4,style:{paddingLeft:"5%",paddingRight:"5%",paddingTop:"5%",paddingBottom:"2%"},children:this.props.products.map((function(t){return e.getAlternatives(t)}))}):Object(Q.jsx)(Q.Fragment,{})}}]),a}(r.a.Component);K.defaultProps={shallow:!1};var q=K,X=a(152),Z=a(538),_=a(257),Y=a.n(_),$={icon:"search"},ee=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleSearchChange=function(e,t){var a=t.value;a.length!==n.tmpMaxSearchLength-1||n.searchSuccessful?a.length>n.tmpMaxSearchLength?n.tmpMaxSearchLength=a.length:0===a.length&&(n.tmpMaxSearchLength=0,n.searchSuccessful=!1):W("FailedSearch",{searchQuery:a}),n.setState({value:a,loading:!0}),setTimeout((function(){var e=new RegExp(n.state.value,"i"),t=n.state.products.filter((function(t){return e.test(t.name)||e.test(t.category)}));n.setState({results:t,loading:!1})}),300)},n.resultRenderer=function(e){return Object(Q.jsx)("div",{children:Object(Q.jsxs)(X.a,{children:[e.name,Object(Q.jsx)("img",{alt:e.name,src:e.imageLink})]})})},n.closeIcon={icon:Object(Q.jsx)(Y.a,{name:"close",onClick:function(){n.searchSuccessful=!1,n.tmpMaxSearchLength=0,n.setState({value:"",icon:$}),n.props.onProductSelection(void 0)},link:!0})},n.state={results:[],value:"",loading:!1,products:e.products,icon:$},n.tmpMaxSearchLength=0,n.searchSuccessful=!1,n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({products:e.products,loading:!1})}},{key:"render",value:function(){var e=this;return Object(Q.jsx)(b.a,{style:{margin:"1em",padding:"1em"},children:Object(Q.jsx)(Z.a,{loading:this.state.loading,onResultSelect:function(t,a){e.searchSuccessful=!0,e.setState({value:a.result.name,icon:e.closeIcon}),e.props.onProductSelection(a.result)},placeholder:d.t("searchPlaceHolder"),resultRenderer:this.resultRenderer,onSearchChange:this.handleSearchChange,results:this.state.results,value:this.state.value,input:this.state.icon})})}}]),a}(r.a.Component),te=a(539),ae=a(544),ne=a(535),re=a(545),se=a(258),ie=a.n(se),ce=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={isOpen:!1,alternative:{imageLink:void 0},product:{imageLink:void 0}},n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({isOpen:e.isOpen,alternative:e.alternative,product:e.product})}},{key:"render",value:function(){if(this.props.alternative&&this.props.product){var e=Math.round((this.props.product.emissions-this.props.alternative.emissions)/this.props.product.emissions*100);return Object(Q.jsx)(te.a,{closeIcon:!0,centered:!1,open:this.state.isOpen,onClose:this.props.onClose,children:Object(Q.jsxs)(b.a,{children:[Object(Q.jsxs)(ae.a,{style:{margin:0,boxShadow:"0px 0px 0px #9E9E9E",border:0},children:[Object(Q.jsxs)(S.a,{columns:2,verticalAlign:"middle",children:[Object(Q.jsx)(S.a.Column,{children:Object(Q.jsx)(v.a,{style:{margin:"auto",maxHeight:200,width:"auto"},size:"small",src:this.state.product.imageLink})}),Object(Q.jsx)(S.a.Column,{children:Object(Q.jsx)(v.a,{style:{margin:"auto",maxHeight:200,width:"auto"},size:"small",src:this.state.alternative.imageLink})})]}),Object(Q.jsxs)(S.a,{columns:2,verticalAlign:"middle",children:[Object(Q.jsx)(S.a.Column,{textAlign:"center",children:Object(Q.jsxs)("b",{children:[this.state.product.emissions," ",this.state.product.unit]})}),Object(Q.jsx)(S.a.Column,{textAlign:"center",children:Object(Q.jsxs)("b",{children:[this.state.alternative.emissions," ",this.state.alternative.unit]})})]}),Object(Q.jsx)(ne.a,{vertical:!0,children:Object(Q.jsx)(y.a,{name:"angle double right",style:{fontSize:"2em"},color:"black"})})]}),Object(Q.jsx)(b.a,{style:{paddingBottom:"1em",paddingTop:"1em",backgroundColor:"#A9DE1B"},textAlign:"center",children:Object(Q.jsxs)(re.a,{style:{color:"#fff"},as:"h3",children:[e,"% ",Object(Q.jsx)(x.a,{children:"better"})]})}),Object(Q.jsxs)(b.a,{style:{paddingLeft:"20%",paddingRight:"20%",paddingBottom:"2em",paddingTop:"1em"},children:[Object(Q.jsxs)(re.a,{style:{color:"#A9DE1B"},as:"h2",children:[G(this.state.product.name)," ",Object(Q.jsx)(x.a,{children:"replaces"})," ",G(this.state.alternative.name)]}),Object(Q.jsx)("p",{children:Object(Q.jsx)(ie.a,{markdown:this.state.alternative.description})})]})]})})}return Object(Q.jsx)(Q.Fragment,{})}}]),a}(r.a.Component),oe=a.p+"static/media/climateers_logo.56e70555.png",le=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onCardClick=function(e,t){W("ViewDetails",{productName:e.name,productId:e.id,alternativeName:t.name,alternativeId:t.id,wasRecommended:!n.state.productSelectedList}),n.setState({modalIsOpen:!0,productSelectedDetails:e,alternativeSelected:t})},n.onModalClose=function(){W("CloseDetails",{productName:n.state.productSelectedDetails.name,productId:n.state.productSelectedDetails.id,alternativeName:n.state.alternativeSelected.name,alternativeId:n.state.alternativeSelected.id}),n.setState({modalIsOpen:!1})},n.selectProduct=function(e){e?(W("searchedProductSelected",{productName:e.name,productId:e.id}),n.setState({productSelectedList:e})):n.setState({productSelectedList:null})},n.getLinkToLanguageSite=function(){return"en"===n.state.language?D?"http://"+window.location.host+"/de":"https://alternatives.climateers.app/de":"de"===n.state.language?D?"http://"+window.location.host+"/en":"https://alternatives.climateers.app/en":void 0},n.state={products:[],loading:!0,productSelectedDetails:null,productSelectedList:null,alternativeSelected:null,language:"en",modalIsOpen:!1,mainContainerHeight:null},window.addEventListener("beforeunload",(function(e){W("UserLeave")})),n}return Object(h.a)(a,[{key:"loadProducts",value:function(e){var t=this;(function(e){return U.apply(this,arguments)})(e).then((function(e){t.setState({products:e,loading:!1})}))}},{key:"changeLanguage",value:function(e){"en"!==e&&"de"!==e&&(console.log("Unknown language parameter: "+e),e="en"),d.changeLanguage(e).then(this.loadProducts(e)),W("UserJoin",{language:e}),this.setState({language:e})}},{key:"componentDidMount",value:function(){this.changeLanguage(window.location.pathname.substring(1))}},{key:"randomProducts",value:function(){if(this.state.products){var e=Object(u.a)(Array(this.state.products.length).keys());e=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(e);for(var t=[],a=0;a<8;a++)t.push(this.state.products[e[a]]);return t}return null}},{key:"render",value:function(){if(this.state.loading)return Object(Q.jsx)(g.a,{});var e=window.innerHeight>850;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(b.a,{id:"mainContainer",textAlign:"center",style:{width:"100%",marginLeft:0,marginRight:0,height:"100%"},children:[Object(Q.jsxs)(b.a,{fluid:!0,style:{backgroundColor:"#A9DE1B",paddingTop:"1em",height:200,marginBottom:"1em"},children:[Object(Q.jsx)(v.a,{style:{margin:"auto",maxHeight:50,width:"auto",paddingTop:"1em"},src:oe,size:"small"}),Object(Q.jsx)("p",{style:{paddingTop:"1em",color:"white"},children:Object(Q.jsx)(x.a,{children:"Welcome"})}),Object(Q.jsx)(ee,{products:this.state.products,onProductSelection:this.selectProduct})]}),Object(Q.jsx)(q,{shallow:!this.state.productSelectedList,products:this.state.productSelectedList?[this.state.productSelectedList]:this.randomProducts(),callback:this.onCardClick}),Object(Q.jsx)(ce,{onClose:this.onModalClose,isOpen:this.state.modalIsOpen,alternative:this.state.alternativeSelected,product:this.state.productSelectedDetails})]}),Object(Q.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#222",position:e?"fixed":"relative",bottom:0,left:0,width:"100%",color:"#fff",textAlign:"center"},children:[Object(Q.jsx)("p",{style:{lineHeight:1},children:Object(Q.jsx)("a",{href:this.getLinkToLanguageSite(),children:Object(Q.jsx)(x.a,{children:"LanguageChange"})})}),Object(Q.jsxs)("p",{style:{lineHeight:1},children:[Object(Q.jsx)("a",{target:"blank",href:"https://climateers.app/impressum/",children:"Impressum"}),Object(Q.jsx)("span",{children:" / "}),Object(Q.jsx)("a",{target:"blank",href:"https://climateers.app/privacy/",children:"Privacy"})]}),Object(Q.jsx)("p",{style:{lineHeight:1},children:"Copyright \xa9 2021, Climateers"})]}),Object(Q.jsx)(O.a,{content:d.t("Feedback"),trigger:Object(Q.jsx)(f.a,{as:"a",href:"mailto:nick@climateers.app",floated:"right",size:"huge",circular:!0,style:{position:"fixed",bottom:e?90:30,right:e?10:0,textAlign:"center",margin:"1em",color:"#FFF",backgroundColor:"#A9DE1B"},icon:"question circle outline"})})]})}}]),a}(r.a.Component),de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,547)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))};i.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(le,{})}),document.getElementById("root")),de()}},[[518,1,2]]]);
//# sourceMappingURL=main.88c7a649.chunk.js.map