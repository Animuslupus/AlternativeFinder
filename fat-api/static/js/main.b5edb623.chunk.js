(this.webpackJsonpfat=this.webpackJsonpfat||[]).push([[0],{184:function(e,t,a){},242:function(e){e.exports=JSON.parse('{"Welcome":"Welcome to Climateers","alternative":"alternative to","better":"more sustainable","replaces":"replaced by"}')},243:function(e){e.exports=JSON.parse('{"Welcome":"Willkommen bei Climateers","alternative":"Alternative zu","better":"Umweltfreundlicher","replaces":"ersetzt durch"}')},509:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),r=a(67),i=a.n(r),c=(a(184),a(182)),o=a(155),l={en:{translation:a(242)},de:{translation:a(243)}};c.a.use(o.d).init({resources:l,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var u=c.a,d=a(253),p=a(36),h=a(37),j=a(43),m=a(41),g=a(524),b=a(522),v=a(254),O=a(532),x=a(529),f=(a(268),a(530)),S=a(527),y=a(91),k=a(87),C=a.n(k),w=a(106),L=a(179),A=a(103),I="https://alternatives.climateers.app",M="https://alternatives.climateers.app",P=!1;A.a.initializeApp({apiKey:"AIzaSyBbBgftjIRw97QbxUSDXDUkeVTJtrP4uQA",authDomain:"climateers-429ca.firebaseapp.com",projectId:"climateers-429ca",storageBucket:"climateers-429ca.appspot.com",messagingSenderId:"969502030102",appId:"1:969502030102:web:7c30c30c43ea7a3cc8f837",measurementId:"G-KMHHWHR8N8"}),A.a.analytics();var D=A.a.firestore(),B=a(246),R=a.n(B),z=a(247),E=a.n(z).a.load("userId");function T(){return(T=Object(L.a)(C.a.mark((function e(t){var a,n,s,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P?I:M,e.next=3,fetch(a+"/altproducts");case 3:return n=e.sent,e.next=6,n.json();case 6:return n=e.sent,s="en"===t?"English":"German",r=n.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{name:e["name"+s],category:e["category"+s],alternatives:e.alternatives.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{name:e["name"+s],category:e["category"+s],description:e["description"+s]})}))})})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return F.apply(this,arguments)}function F(){return(F=Object(L.a)(C.a.mark((function e(t){var a,n,s,r=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,R.a.v4({fallbackUrls:["https://ifconfig.co/ip"]});case 3:n=e.sent,s={type:t,userId:E||"",ipAddress:n,createdAt:A.a.firestore.Timestamp.now(),params:a},P?console.log(s):D.collection("FATEvents").add(s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return e?e.replace(/^\w/,(function(e){return e.toUpperCase()})):e}var U=a(6),W=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=Math.round((this.props.product.emissions-this.props.alternative.emissions)/this.props.product.emissions*100);return Object(U.jsxs)(S.a,{centered:!0,onClick:function(){e.props.onClick(e.props.product,e.props.alternative)},children:[Object(U.jsx)(S.a,{style:{marginBottom:"0"},children:Object(U.jsx)(S.a.Content,{children:Object(U.jsxs)(f.a,{columns:3,verticalAlign:"middle",children:[Object(U.jsx)(f.a.Column,{children:Object(U.jsx)(v.a,{style:{maxHeight:50,width:"auto"},size:"small",src:this.props.product.imageLink})}),Object(U.jsx)(f.a.Column,{textAlign:"center",children:Object(U.jsx)(y.a,{name:"angle double right",size:"big",color:"black"})}),Object(U.jsx)(f.a.Column,{children:Object(U.jsx)(v.a,{style:{maxHeight:60,width:"auto"},size:"small",src:this.props.alternative.imageLink})})]})})}),Object(U.jsxs)(S.a.Content,{style:{borderTop:0},children:[Object(U.jsx)(S.a.Header,{children:N(this.props.alternative.name)}),Object(U.jsxs)(S.a.Meta,{children:[Object(U.jsx)(x.a,{children:"alternative"})," ",N(this.props.product.name)]})]}),Object(U.jsxs)(S.a.Content,{extra:!0,textAlign:"center",children:[t,"% ",Object(U.jsx)(x.a,{children:"better"})]})]})}}]),a}(s.a.Component),J=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderAlternative",value:function(e,t){return Object(U.jsx)(f.a.Column,{children:Object(U.jsx)(W,{onClick:this.props.callback,product:e,alternative:t})},t.id.toString()+e.id.toString())}},{key:"getAlternatives",value:function(e){var t=this;return this.props.shallow?this.renderAlternative(e,e.alternatives[0]):e.alternatives.map((function(a){return t.renderAlternative(e,a)}))}},{key:"render",value:function(){var e=this;return this.props.products&&this.props.products.length>0&&this.props.products[0]?Object(U.jsx)(f.a,{stackable:!0,doubling:!0,columns:4,style:{padding:"5%"},children:this.props.products.map((function(t){return e.getAlternatives(t)}))}):Object(U.jsx)(U.Fragment,{})}}]),a}(s.a.Component);J.defaultProps={shallow:!1};var Q=J,V=a(148),G=a(525),K=a(251),X=a.n(K),_={icon:"search"},q=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleSearchChange=function(e,t){var a=t.value;a.length!==n.tmpMaxSearchLength-1||n.searchSuccessful?a.length>n.tmpMaxSearchLength?n.tmpMaxSearchLength=a.length:0===a.length&&(n.tmpMaxSearchLength=0,n.searchSuccessful=!1):H("FailedSearch",{searchQuery:a}),n.setState({value:a,loading:!0}),setTimeout((function(){var e=new RegExp(n.state.value,"i"),t=n.state.products.filter((function(t){return e.test(t.name)||e.test(t.category)}));n.setState({results:t,loading:!1})}),300)},n.resultRenderer=function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)(V.a,{children:[e.name,Object(U.jsx)("img",{src:e.imageLink})]})})},n.closeIcon={icon:Object(U.jsx)(X.a,{name:"close",onClick:function(){n.searchSuccessful=!1,n.tmpMaxSearchLength=0,n.setState({value:"",icon:_}),n.props.onProductSelection(void 0)},link:!0})},n.state={results:[],value:"",loading:!1,products:e.products,icon:_},n.tmpMaxSearchLength=0,n.searchSuccessful=!1,n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({products:e.products,loading:!1})}},{key:"render",value:function(){var e=this;return Object(U.jsx)(b.a,{style:{margin:"1em",padding:"1em"},children:Object(U.jsx)(G.a,{loading:this.state.loading,onResultSelect:function(t,a){e.searchSuccessful=!0,e.setState({value:a.result.name,icon:e.closeIcon}),e.props.onProductSelection(a.result)},resultRenderer:this.resultRenderer,onSearchChange:this.handleSearchChange,results:this.state.results,value:this.state.value,input:this.state.icon})})}}]),a}(s.a.Component),Y=a(133),Z=a(526),$=a(531),ee=a(523),te=a(252),ae=a.n(te),ne=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={isOpen:!1,alternative:{imageLink:void 0},product:{imageLink:void 0}},n}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({isOpen:e.isOpen,alternative:e.alternative,product:e.product})}},{key:"render",value:function(){if(this.props.alternative&&this.props.product){var e=Math.round((this.props.product.emissions-this.props.alternative.emissions)/this.props.product.emissions*100);return Object(U.jsx)(Z.a,{closeIcon:!0,centered:!1,open:this.state.isOpen,onClose:this.props.onClose,children:Object(U.jsxs)(b.a,{children:[Object(U.jsxs)($.a,{style:{margin:0,boxShadow:"0px 0px 0px #9E9E9E",border:0},children:[Object(U.jsxs)(f.a,{columns:2,verticalAlign:"middle",children:[Object(U.jsx)(f.a.Column,{children:Object(U.jsx)(v.a,{style:{margin:"auto",maxHeight:200,width:"auto"},size:"small",src:this.state.product.imageLink})}),Object(U.jsx)(f.a.Column,{children:Object(U.jsx)(v.a,Object(Y.a)({style:{margin:"auto",maxHeight:200,width:"auto"},size:"small",src:this.state.product.imageLink},"src",this.state.alternative.imageLink))})]}),Object(U.jsxs)(f.a,{columns:2,verticalAlign:"middle",children:[Object(U.jsx)(f.a.Column,{textAlign:"center",children:Object(U.jsxs)("b",{children:[this.state.product.emissions," ",this.state.product.unit]})}),Object(U.jsx)(f.a.Column,{textAlign:"center",children:Object(U.jsxs)("b",{children:[this.state.alternative.emissions," ",this.state.alternative.unit]})})]}),Object(U.jsx)(ee.a,{vertical:!0,children:Object(U.jsx)(y.a,{name:"angle double right",style:{fontSize:"2em"},color:"black"})})]}),Object(U.jsx)(b.a,{style:{paddingBottom:"1em",paddingTop:"1em",backgroundColor:"#A9DE1B"},textAlign:"center",children:Object(U.jsxs)(O.a,{style:{color:"#fff"},as:"h3",children:[e,"% ",Object(U.jsx)(x.a,{children:"better"})]})}),Object(U.jsxs)(b.a,{style:{paddingLeft:"20%",paddingRight:"20%",paddingBottom:"2em",paddingTop:"1em"},children:[Object(U.jsxs)(O.a,{style:{color:"#A9DE1B"},as:"h2",children:[N(this.state.product.name)," ",Object(U.jsx)(x.a,{children:"replaces"})," ",N(this.state.alternative.name)]}),Object(U.jsx)("p",{children:Object(U.jsx)(ae.a,{markdown:this.state.alternative.description})})]})]})})}return Object(U.jsx)(U.Fragment,{})}}]),a}(s.a.Component),se=a.p+"static/media/climateers_logo.0c6d4ee7.png",re=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onCardClick=function(e,t){H("ViewDetails",{productName:e.name,productId:e.id,alternativeName:t.name,alternativeId:t.id,wasRecommended:!n.state.productSelectedList}),n.setState({modalIsOpen:!0,productSelectedDetails:e,alternativeSelected:t})},n.onModalClose=function(){H("CloseDetails",{productName:n.state.productSelectedDetails.name,productId:n.state.productSelectedDetails.id,alternativeName:n.state.alternativeSelected.name,alternativeId:n.state.alternativeSelected.id}),n.setState({modalIsOpen:!1})},n.selectProduct=function(e){e?(H("searchedProductSelected",{productName:e.name,productId:e.id}),n.setState({productSelectedList:e})):n.setState({productSelectedList:null})},n.state={products:[],loading:!0,productSelectedDetails:null,productSelectedList:null,alternativeSelected:null,language:"en",modalIsOpen:!1},window.addEventListener("beforeunload",(function(e){H("UserLeave")})),n}return Object(h.a)(a,[{key:"loadProducts",value:function(e){var t=this;(function(e){return T.apply(this,arguments)})(e).then((function(e){t.setState({products:e,loading:!1})}))}},{key:"changeLanguage",value:function(e){"en"!==e&&"de"!==e&&(console.log("Unknown language parameter: "+e),e="en"),u.changeLanguage(e).then(this.loadProducts(e)),H("UserJoin",{language:e}),this.setState({language:e})}},{key:"componentDidMount",value:function(){this.changeLanguage(window.location.pathname.substring(1))}},{key:"randomProducts",value:function(){if(this.state.products){var e=Object(d.a)(Array(this.state.products.length).keys());e=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(e);for(var t=[],a=0;a<8;a++)t.push(this.state.products[e[a]]);return t}return null}},{key:"render",value:function(){return this.state.loading?Object(U.jsx)(g.a,{}):Object(U.jsxs)(b.a,{textAlign:"center",style:{width:"100%",marginLeft:0,marginRight:0},children:[Object(U.jsxs)(b.a,{fluid:!0,style:{backgroundColor:"#A9DE1B",paddingTop:"1em",height:200,marginBottom:"1em"},children:[Object(U.jsx)(v.a,{style:{margin:"auto",maxHeight:50,width:"auto"},src:se,size:"small"}),Object(U.jsx)(O.a,{inverted:!0,children:Object(U.jsx)(x.a,{children:"Welcome"})}),Object(U.jsx)(q,{products:this.state.products,onProductSelection:this.selectProduct})]}),Object(U.jsx)(Q,{shallow:!this.state.productSelectedList,products:this.state.productSelectedList?[this.state.productSelectedList]:this.randomProducts(),callback:this.onCardClick}),Object(U.jsx)(ne,{onClose:this.onModalClose,isOpen:this.state.modalIsOpen,alternative:this.state.alternativeSelected,product:this.state.productSelectedDetails})]})}}]),a}(s.a.Component),ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,534)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};i.a.render(Object(U.jsx)(s.a.StrictMode,{children:Object(U.jsx)(re,{})}),document.getElementById("root")),ie()}},[[509,1,2]]]);
//# sourceMappingURL=main.b5edb623.chunk.js.map